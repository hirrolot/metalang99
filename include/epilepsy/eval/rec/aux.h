#ifndef EPILEPSY_EVAL_REC_AUX_H
#define EPILEPSY_EVAL_REC_AUX_H

#define EPILEPSY_PRIV_REC_DEFER_2_TIMES(op) EPILEPSY_PRIV_REC_DEFER_0(EPILEPSY_PRIV_REC_DEFER_1)(op)
#define EPILEPSY_PRIV_REC_DEFER_0(op)       op EPILEPSY_PRIV_REC_EMPTY()
#define EPILEPSY_PRIV_REC_DEFER_1(op)       op EPILEPSY_PRIV_REC_EMPTY()

#define EPILEPSY_PRIV_REC_UNPARENTHESISE(x) EPILEPSY_PRIV_REC_EXPAND(EPILEPSY_PRIV_REC_EXPAND x)

#define EPILEPSY_PRIV_REC_CAT(x, y)           EPILEPSY_PRIV_REC_PRIMITIVE_CAT(x, y)
#define EPILEPSY_PRIV_REC_PRIMITIVE_CAT(x, y) x##y

#define EPILEPSY_PRIV_REC_MATCH(op, pattern) EPILEPSY_PRIV_REC_CAT(op, pattern)

#define EPILEPSY_PRIV_REC_EMPTY()
#define EPILEPSY_PRIV_REC_EXPAND(...) __VA_ARGS__

#define EPILEPSY_PRIV_REC_HEAD(head, ...)  head
#define EPILEPSY_PRIV_REC_TAIL(_head, ...) __VA_ARGS__

#define EPILEPSY_PRIV_REC_CHOICE EPILEPSY_PRIV_REC_HEAD

#endif // EPILEPSY_EVAL_REC_AUX_H
